<script>
  import { createEventDispatcher } from "svelte";
  import { randInt } from "../scripts/util";

  const d = createEventDispatcher();
  let swap = false;

  function random() {
    return randInt(90, 127);
  }

  function onHander(note, status_of) {
    d("note_on", { channel, note: notes[note], velocity: random() });
    status[status_of] = true;
  }

  function offHander(note, status_of) {
    d("note_off", { channel, note: notes[note], velocity: 0 });
    status[status_of] = false;
  }

  function moveHandler(e) {
    e.preventDefault();
  }

  let channel = 0;

  const notes = {
    kick1: 35,
    kick2: 36,

    snare: 38,
    snare_rim: 40,
    snare_side: 37,

    tom_hi: 50,
    tom_med: 47,
    tom_lo: 45,
    floor: 41,

    crash1: 49,
    crash2: 57,
    splash: 55,

    ride: 51,
    ride_bell: 53,

    hat_open: 46,
    hat_close: 42,
  };

  const status = {
    kick1: false,
    kick2: false,

    snare: false,

    tom_hi: false,
    tom_med: false,
    tom_lo: false,
    floor: false,

    crash1: false,
    crash2: false,
    splash: false,

    ride: false,
    hat_open: false,
    hat_close: false,
  };
</script>


<div class:flip={swap} class="base">
  <svg
    width="100%"
    height="100%"
    viewBox="0 0 921 424"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g id="drums">
      <g
        id="floor"
        on:touchstart={() => onHander("floor", "floor")}
        on:touchend={() => offHander("floor", "floor")}
        on:touchmove={moveHandler}
        on:touchcancel={() => offHander("floor", "floor")}
      >
        <circle
          id="floor_2"
          cx="56"
          cy="297"
          r="108.5"
          fill={status.floor ? "#6666DD" : "#666666"}
          stroke="white"
        />
        {#if !swap}
          <path
            id="FLOOR"
            d="M38.4727 375.602H35.1562V379H33.0996V370.469H38.8066V372.057H35.1562V374.02H38.4727V375.602ZM41.7188 377.418H45.2988V379H39.6621V370.469H41.7188V377.418ZM53.0156 374.91C53.0156 375.742 52.8613 376.479 52.5527 377.119C52.2441 377.76 51.8047 378.254 51.2344 378.602C50.668 378.945 50.0215 379.117 49.2949 379.117C48.5684 379.117 47.9238 378.951 47.3613 378.619C46.7988 378.283 46.3594 377.805 46.043 377.184C45.7305 376.562 45.5664 375.85 45.5508 375.045V374.564C45.5508 373.729 45.7031 372.992 46.0078 372.355C46.3164 371.715 46.7559 371.221 47.3262 370.873C47.9004 370.525 48.5527 370.352 49.2832 370.352C50.0059 370.352 50.6504 370.523 51.2168 370.867C51.7832 371.211 52.2227 371.701 52.5352 372.338C52.8516 372.971 53.0117 373.697 53.0156 374.518V374.91ZM50.9238 374.553C50.9238 373.705 50.7812 373.062 50.4961 372.625C50.2148 372.184 49.8105 371.963 49.2832 371.963C48.252 371.963 47.707 372.736 47.6484 374.283L47.6426 374.91C47.6426 375.746 47.7812 376.389 48.0586 376.838C48.3359 377.287 48.748 377.512 49.2949 377.512C49.8145 377.512 50.2148 377.291 50.4961 376.85C50.7773 376.408 50.9199 375.773 50.9238 374.945V374.553ZM61.3008 374.91C61.3008 375.742 61.1465 376.479 60.8379 377.119C60.5293 377.76 60.0898 378.254 59.5195 378.602C58.9531 378.945 58.3066 379.117 57.5801 379.117C56.8535 379.117 56.209 378.951 55.6465 378.619C55.084 378.283 54.6445 377.805 54.3281 377.184C54.0156 376.562 53.8516 375.85 53.8359 375.045V374.564C53.8359 373.729 53.9883 372.992 54.293 372.355C54.6016 371.715 55.041 371.221 55.6113 370.873C56.1855 370.525 56.8379 370.352 57.5684 370.352C58.291 370.352 58.9355 370.523 59.502 370.867C60.0684 371.211 60.5078 371.701 60.8203 372.338C61.1367 372.971 61.2969 373.697 61.3008 374.518V374.91ZM59.209 374.553C59.209 373.705 59.0664 373.062 58.7812 372.625C58.5 372.184 58.0957 371.963 57.5684 371.963C56.5371 371.963 55.9922 372.736 55.9336 374.283L55.9277 374.91C55.9277 375.746 56.0664 376.389 56.3438 376.838C56.6211 377.287 57.0332 377.512 57.5801 377.512C58.0996 377.512 58.5 377.291 58.7812 376.85C59.0625 376.408 59.2051 375.773 59.209 374.945V374.553ZM65.5312 375.988H64.418V379H62.3613V370.469H65.7188C66.7305 370.469 67.5215 370.693 68.0918 371.143C68.6621 371.592 68.9473 372.227 68.9473 373.047C68.9473 373.641 68.8262 374.133 68.584 374.523C68.3457 374.914 67.9707 375.23 67.459 375.473L69.2402 378.912V379H67.0371L65.5312 375.988ZM64.418 374.4H65.7188C66.1094 374.4 66.4023 374.299 66.5977 374.096C66.7969 373.889 66.8965 373.602 66.8965 373.234C66.8965 372.867 66.7969 372.58 66.5977 372.373C66.3984 372.162 66.1055 372.057 65.7188 372.057H64.418V374.4Z"
            fill="white"
          />
        {/if}
      </g>
      <g
        id="kick1"
        on:touchstart={() => onHander("kick1", "kick1")}
        on:touchend={() => offHander("kick1", "kick1")}
        on:touchmove={moveHandler}
        on:touchcancel={() => offHander("kick1", "kick1")}
      >
        <circle
          id="kick-left"
          cx="310"
          cy="354"
          r="134.5"
          fill={status.kick1 ? "#6666DD" : "#ACACAC"}
          stroke="white"
        />
        {#if !swap}
          <path
            id="KICK 1"
            d="M295.152 405.824L294.309 406.75V409H292.252V400.469H294.309V404.23L295.023 403.146L296.863 400.469H299.406L296.523 404.242L299.406 409H296.969L295.152 405.824ZM302.119 409H300.068V400.469H302.119V409ZM310.451 406.111C310.424 406.705 310.264 407.23 309.971 407.688C309.678 408.141 309.266 408.492 308.734 408.742C308.207 408.992 307.604 409.117 306.924 409.117C305.803 409.117 304.92 408.752 304.275 408.021C303.631 407.291 303.309 406.26 303.309 404.928V404.506C303.309 403.67 303.453 402.939 303.742 402.314C304.035 401.686 304.455 401.201 305.002 400.861C305.549 400.518 306.182 400.346 306.9 400.346C307.936 400.346 308.768 400.619 309.396 401.166C310.025 401.709 310.383 402.459 310.469 403.416H308.418C308.402 402.896 308.271 402.523 308.025 402.297C307.779 402.07 307.404 401.957 306.9 401.957C306.389 401.957 306.014 402.148 305.775 402.531C305.537 402.914 305.412 403.525 305.4 404.365V404.969C305.4 405.879 305.514 406.529 305.74 406.92C305.971 407.311 306.365 407.506 306.924 407.506C307.396 407.506 307.758 407.395 308.008 407.172C308.258 406.949 308.391 406.596 308.406 406.111H310.451ZM314.324 405.824L313.48 406.75V409H311.424V400.469H313.48V404.23L314.195 403.146L316.035 400.469H318.578L315.695 404.242L318.578 409H316.141L314.324 405.824ZM326.342 409H324.361V402.695L322.416 403.264V401.764L326.16 400.469H326.342V409Z"
            fill="black"
          />
        {/if}
      </g>
      <g
        id="kick2"
        on:touchstart={() => onHander("kick2", "kick2")}
        on:touchend={() => offHander("kick2", "kick2")}
        on:touchmove={moveHandler}
        on:touchcancel={() => offHander("kick2", "kick2")}
      >
        <circle
          id="kick-right"
          cx="600"
          cy="354"
          r="134.5"
          fill={status.kick2 ? "#6666DD" : "#ACACAC"}
          stroke="white"
        />
        {#if !swap}
          <path
            id="KICK 2"
            d="M585.152 405.824L584.309 406.75V409H582.252V400.469H584.309V404.23L585.023 403.146L586.863 400.469H589.406L586.523 404.242L589.406 409H586.969L585.152 405.824ZM592.119 409H590.068V400.469H592.119V409ZM600.451 406.111C600.424 406.705 600.264 407.23 599.971 407.688C599.678 408.141 599.266 408.492 598.734 408.742C598.207 408.992 597.604 409.117 596.924 409.117C595.803 409.117 594.92 408.752 594.275 408.021C593.631 407.291 593.309 406.26 593.309 404.928V404.506C593.309 403.67 593.453 402.939 593.742 402.314C594.035 401.686 594.455 401.201 595.002 400.861C595.549 400.518 596.182 400.346 596.9 400.346C597.936 400.346 598.768 400.619 599.396 401.166C600.025 401.709 600.383 402.459 600.469 403.416H598.418C598.402 402.896 598.271 402.523 598.025 402.297C597.779 402.07 597.404 401.957 596.9 401.957C596.389 401.957 596.014 402.148 595.775 402.531C595.537 402.914 595.412 403.525 595.4 404.365V404.969C595.4 405.879 595.514 406.529 595.74 406.92C595.971 407.311 596.365 407.506 596.924 407.506C597.396 407.506 597.758 407.395 598.008 407.172C598.258 406.949 598.391 406.596 598.406 406.111H600.451ZM604.324 405.824L603.48 406.75V409H601.424V400.469H603.48V404.23L604.195 403.146L606.035 400.469H608.578L605.695 404.242L608.578 409H606.141L604.324 405.824ZM617.918 409H611.965V407.711L614.707 404.828C615.383 404.059 615.721 403.447 615.721 402.994C615.721 402.627 615.641 402.348 615.48 402.156C615.32 401.965 615.088 401.869 614.783 401.869C614.482 401.869 614.238 401.998 614.051 402.256C613.863 402.51 613.77 402.828 613.77 403.211H611.789C611.789 402.688 611.92 402.205 612.182 401.764C612.443 401.318 612.807 400.971 613.271 400.721C613.736 400.471 614.256 400.346 614.83 400.346C615.752 400.346 616.461 400.559 616.957 400.984C617.457 401.41 617.707 402.021 617.707 402.818C617.707 403.154 617.645 403.482 617.52 403.803C617.395 404.119 617.199 404.453 616.934 404.805C616.672 405.152 616.248 405.619 615.662 406.205L614.561 407.477H617.918V409Z"
            fill="black"
          />
        {/if}
      </g>
      <g id="snare">
        <g id="snare_2">
          <circle
            id="snare-side"
            cx="456.5"
            cy="228.5"
            r="107"
            fill={status.snare ? "#6666DD" : "#C4C4C4"}
            stroke="white"
            on:touchstart={() => onHander("snare_side", "snare")}
            on:touchend={() => offHander("snare_side", "snare")}
            on:touchmove={moveHandler}
            on:touchcancel={() => offHander("snare_side", "snare")}
          />
          <circle
            id="snare_3"
            cx="457"
            cy="232"
            r="90"
            fill={status.snare ? "#6666DD" : "#C4C4C4"}
            on:touchstart={() => onHander("snare", "snare")}
            on:touchend={() => offHander("snare", "snare")}
            on:touchmove={moveHandler}
            on:touchcancel={() => offHander("snare", "snare")}
          />
          <circle
            id="snare-rim"
            cx="455"
            cy="233"
            r="67"
            fill={status.snare ? "#6666DD" : "#C4C4C4"}
            on:touchstart={() => onHander("snare_rim", "snare")}
            on:touchend={() => offHander("snare_rim", "snare")}
            on:touchmove={moveHandler}
            on:touchcancel={() => offHander("snare_rim", "snare")}
          />
        </g>
        {#if !swap}
          <path
            id="SNARE"
            d="M438.662 306.732C438.662 306.432 438.555 306.197 438.34 306.029C438.129 305.861 437.756 305.688 437.221 305.508C436.686 305.328 436.248 305.154 435.908 304.986C434.803 304.443 434.25 303.697 434.25 302.748C434.25 302.275 434.387 301.859 434.66 301.5C434.938 301.137 435.328 300.855 435.832 300.656C436.336 300.453 436.902 300.352 437.531 300.352C438.145 300.352 438.693 300.461 439.178 300.68C439.666 300.898 440.045 301.211 440.314 301.617C440.584 302.02 440.719 302.48 440.719 303H438.668C438.668 302.652 438.561 302.383 438.346 302.191C438.135 302 437.848 301.904 437.484 301.904C437.117 301.904 436.826 301.986 436.611 302.15C436.4 302.311 436.295 302.516 436.295 302.766C436.295 302.984 436.412 303.184 436.646 303.363C436.881 303.539 437.293 303.723 437.883 303.914C438.473 304.102 438.957 304.305 439.336 304.523C440.258 305.055 440.719 305.787 440.719 306.721C440.719 307.467 440.438 308.053 439.875 308.479C439.312 308.904 438.541 309.117 437.561 309.117C436.869 309.117 436.242 308.994 435.68 308.748C435.121 308.498 434.699 308.158 434.414 307.729C434.133 307.295 433.992 306.797 433.992 306.234H436.055C436.055 306.691 436.172 307.029 436.406 307.248C436.645 307.463 437.029 307.57 437.561 307.57C437.9 307.57 438.168 307.498 438.363 307.354C438.562 307.205 438.662 306.998 438.662 306.732ZM448.898 309H446.854L443.83 303.691V309H441.773V300.469H443.83L446.848 305.777V300.469H448.898V309ZM455.15 307.406H452.332L451.84 309H449.643L452.771 300.469H454.705L457.857 309H455.648L455.15 307.406ZM452.824 305.818H454.658L453.738 302.859L452.824 305.818ZM461.654 305.988H460.541V309H458.484V300.469H461.842C462.854 300.469 463.645 300.693 464.215 301.143C464.785 301.592 465.07 302.227 465.07 303.047C465.07 303.641 464.949 304.133 464.707 304.523C464.469 304.914 464.094 305.23 463.582 305.473L465.363 308.912V309H463.16L461.654 305.988ZM460.541 304.4H461.842C462.232 304.4 462.525 304.299 462.721 304.096C462.92 303.889 463.02 303.602 463.02 303.234C463.02 302.867 462.92 302.58 462.721 302.373C462.521 302.162 462.229 302.057 461.842 302.057H460.541V304.4ZM471.604 305.385H468.369V307.418H472.189V309H466.312V300.469H472.201V302.057H468.369V303.855H471.604V305.385Z"
            fill="black"
          />
        {/if}
      </g>
      <g
        id="tom-l"
        on:touchstart={() => onHander("tom_lo", "tom_lo")}
        on:touchend={() => offHander("tom_lo", "tom_lo")}
        on:touchmove={moveHandler}
        on:touchcancel={() => offHander("tom_lo", "tom_lo")}
      >
        <circle
          id="lo-tom"
          cx="620"
          cy="154"
          r="89.5"
          fill={status.tom_lo ? "#6666DD" : "#686565"}
          stroke="white"
        />
        {#if !swap}
          <path
            id="TOM L"
            d="M609.488 212.057H606.928V219H604.871V212.057H602.357V210.469H609.488V212.057ZM617.422 214.91C617.422 215.742 617.268 216.479 616.959 217.119C616.65 217.76 616.211 218.254 615.641 218.602C615.074 218.945 614.428 219.117 613.701 219.117C612.975 219.117 612.33 218.951 611.768 218.619C611.205 218.283 610.766 217.805 610.449 217.184C610.137 216.562 609.973 215.85 609.957 215.045V214.564C609.957 213.729 610.109 212.992 610.414 212.355C610.723 211.715 611.162 211.221 611.732 210.873C612.307 210.525 612.959 210.352 613.689 210.352C614.412 210.352 615.057 210.523 615.623 210.867C616.189 211.211 616.629 211.701 616.941 212.338C617.258 212.971 617.418 213.697 617.422 214.518V214.91ZM615.33 214.553C615.33 213.705 615.188 213.062 614.902 212.625C614.621 212.184 614.217 211.963 613.689 211.963C612.658 211.963 612.113 212.736 612.055 214.283L612.049 214.91C612.049 215.746 612.188 216.389 612.465 216.838C612.742 217.287 613.154 217.512 613.701 217.512C614.221 217.512 614.621 217.291 614.902 216.85C615.184 216.408 615.326 215.773 615.33 214.945V214.553ZM621.184 210.469L623.088 216.404L624.986 210.469H627.693V219H625.631V217.008L625.83 212.93L623.768 219H622.408L620.34 212.924L620.539 217.008V219H618.482V210.469H621.184ZM634.051 217.418H637.631V219H631.994V210.469H634.051V217.418Z"
            fill="white"
          />
        {/if}
      </g>
      <g
        id="tom-m"
        on:touchstart={() => onHander("tom_med", "tom_med")}
        on:touchend={() => offHander("tom_med", "tom_med")}
        on:touchmove={moveHandler}
        on:touchcancel={() => offHander("tom_med", "tom_med")}
      >
        <circle
          id="med-tom"
          cx="453"
          cy="87"
          r="86.5"
          fill={status.tom_med ? "#6666DD" : "#686565"}
          stroke="white"
        />
        {#if !swap}
          <path
            id="TOM M"
            d="M440.479 142.057H437.918V149H435.861V142.057H433.348V140.469H440.479V142.057ZM448.412 144.91C448.412 145.742 448.258 146.479 447.949 147.119C447.641 147.76 447.201 148.254 446.631 148.602C446.064 148.945 445.418 149.117 444.691 149.117C443.965 149.117 443.32 148.951 442.758 148.619C442.195 148.283 441.756 147.805 441.439 147.184C441.127 146.562 440.963 145.85 440.947 145.045V144.564C440.947 143.729 441.1 142.992 441.404 142.355C441.713 141.715 442.152 141.221 442.723 140.873C443.297 140.525 443.949 140.352 444.68 140.352C445.402 140.352 446.047 140.523 446.613 140.867C447.18 141.211 447.619 141.701 447.932 142.338C448.248 142.971 448.408 143.697 448.412 144.518V144.91ZM446.32 144.553C446.32 143.705 446.178 143.062 445.893 142.625C445.611 142.184 445.207 141.963 444.68 141.963C443.648 141.963 443.104 142.736 443.045 144.283L443.039 144.91C443.039 145.746 443.178 146.389 443.455 146.838C443.732 147.287 444.145 147.512 444.691 147.512C445.211 147.512 445.611 147.291 445.893 146.85C446.174 146.408 446.316 145.773 446.32 144.945V144.553ZM452.174 140.469L454.078 146.404L455.977 140.469H458.684V149H456.621V147.008L456.82 142.93L454.758 149H453.398L451.33 142.924L451.529 147.008V149H449.473V140.469H452.174ZM465.686 140.469L467.59 146.404L469.488 140.469H472.195V149H470.133V147.008L470.332 142.93L468.27 149H466.91L464.842 142.924L465.041 147.008V149H462.984V140.469H465.686Z"
            fill="white"
          />
        {/if}
      </g>
      <g
        id="tom-h"
        on:touchstart={() => onHander("tom_hi", "tom_hi")}
        on:touchend={() => offHander("tom_hi", "tom_hi")}
        on:touchmove={moveHandler}
        on:touchcancel={() => offHander("tom_hi", "tom_hi")}
      >
        <circle
          id="hi-tom"
          cx="300.5"
          cy="155.5"
          r="76"
          fill={status.tom_hi ? "#6666DD" : "#686565"}
          stroke="white"
        />
        {#if !swap}
          <path
            id="TOM H"
            d="M289.521 202.057H286.961V209H284.904V202.057H282.391V200.469H289.521V202.057ZM297.455 204.91C297.455 205.742 297.301 206.479 296.992 207.119C296.684 207.76 296.244 208.254 295.674 208.602C295.107 208.945 294.461 209.117 293.734 209.117C293.008 209.117 292.363 208.951 291.801 208.619C291.238 208.283 290.799 207.805 290.482 207.184C290.17 206.562 290.006 205.85 289.99 205.045V204.564C289.99 203.729 290.143 202.992 290.447 202.355C290.756 201.715 291.195 201.221 291.766 200.873C292.34 200.525 292.992 200.352 293.723 200.352C294.445 200.352 295.09 200.523 295.656 200.867C296.223 201.211 296.662 201.701 296.975 202.338C297.291 202.971 297.451 203.697 297.455 204.518V204.91ZM295.363 204.553C295.363 203.705 295.221 203.062 294.936 202.625C294.654 202.184 294.25 201.963 293.723 201.963C292.691 201.963 292.146 202.736 292.088 204.283L292.082 204.91C292.082 205.746 292.221 206.389 292.498 206.838C292.775 207.287 293.188 207.512 293.734 207.512C294.254 207.512 294.654 207.291 294.936 206.85C295.217 206.408 295.359 205.773 295.363 204.945V204.553ZM301.217 200.469L303.121 206.404L305.02 200.469H307.727V209H305.664V207.008L305.863 202.93L303.801 209H302.441L300.373 202.924L300.572 207.008V209H298.516V200.469H301.217ZM319.158 209H317.113V205.438H314.084V209H312.027V200.469H314.084V203.855H317.113V200.469H319.158V209Z"
            fill="white"
          />
        {/if}
      </g>
      <g
        id="crash1"
        on:touchstart={() => onHander("crash1", "crash1")}
        on:touchend={() => offHander("crash1", "crash1")}
        on:touchmove={moveHandler}
        on:touchcancel={() => offHander("crash1", "crash1")}
      >
        <circle
          id="crash1_2"
          cx="158.5"
          cy="73.5"
          r="107"
          fill={status.crash1 ? "#6666DD" : "#BFB580"}
          stroke="white"
        />
        {#if !swap}
          <path
            id="CR1"
            d="M154.221 156.111C154.193 156.705 154.033 157.23 153.74 157.688C153.447 158.141 153.035 158.492 152.504 158.742C151.977 158.992 151.373 159.117 150.693 159.117C149.572 159.117 148.689 158.752 148.045 158.021C147.4 157.291 147.078 156.26 147.078 154.928V154.506C147.078 153.67 147.223 152.939 147.512 152.314C147.805 151.686 148.225 151.201 148.771 150.861C149.318 150.518 149.951 150.346 150.67 150.346C151.705 150.346 152.537 150.619 153.166 151.166C153.795 151.709 154.152 152.459 154.238 153.416H152.188C152.172 152.896 152.041 152.523 151.795 152.297C151.549 152.07 151.174 151.957 150.67 151.957C150.158 151.957 149.783 152.148 149.545 152.531C149.307 152.914 149.182 153.525 149.17 154.365V154.969C149.17 155.879 149.283 156.529 149.51 156.92C149.74 157.311 150.135 157.506 150.693 157.506C151.166 157.506 151.527 157.395 151.777 157.172C152.027 156.949 152.16 156.596 152.176 156.111H154.221ZM158.363 155.988H157.25V159H155.193V150.469H158.551C159.562 150.469 160.354 150.693 160.924 151.143C161.494 151.592 161.779 152.227 161.779 153.047C161.779 153.641 161.658 154.133 161.416 154.523C161.178 154.914 160.803 155.23 160.291 155.473L162.072 158.912V159H159.869L158.363 155.988ZM157.25 154.4H158.551C158.941 154.4 159.234 154.299 159.43 154.096C159.629 153.889 159.729 153.602 159.729 153.234C159.729 152.867 159.629 152.58 159.43 152.373C159.23 152.162 158.938 152.057 158.551 152.057H157.25V154.4ZM167.275 159H165.295V152.695L163.35 153.264V151.764L167.094 150.469H167.275V159Z"
            fill="black"
          />
        {/if}
      </g>
      <g
        id="crash2"
        on:touchstart={() => onHander("crash2", "crash2")}
        on:touchend={() => offHander("crash2", "crash2")}
        on:touchmove={moveHandler}
        on:touchcancel={() => offHander("crash2", "crash2")}
      >
        <circle
          id="crash2_2"
          cx="567.5"
          cy="20.5"
          r="92"
          fill={status.crash2 ? "#6666DD" : "#BFB580"}
          stroke="white"
        />
        {#if !swap}
          <path
            id="CR2"
            d="M564.221 96.1113C564.193 96.7051 564.033 97.2305 563.74 97.6875C563.447 98.1406 563.035 98.4922 562.504 98.7422C561.977 98.9922 561.373 99.1172 560.693 99.1172C559.572 99.1172 558.689 98.752 558.045 98.0215C557.4 97.291 557.078 96.2598 557.078 94.9277V94.5059C557.078 93.6699 557.223 92.9395 557.512 92.3145C557.805 91.6855 558.225 91.2012 558.771 90.8613C559.318 90.5176 559.951 90.3457 560.67 90.3457C561.705 90.3457 562.537 90.6191 563.166 91.166C563.795 91.709 564.152 92.459 564.238 93.416H562.188C562.172 92.8965 562.041 92.5234 561.795 92.2969C561.549 92.0703 561.174 91.957 560.67 91.957C560.158 91.957 559.783 92.1484 559.545 92.5312C559.307 92.9141 559.182 93.5254 559.17 94.3652V94.9688C559.17 95.8789 559.283 96.5293 559.51 96.9199C559.74 97.3105 560.135 97.5059 560.693 97.5059C561.166 97.5059 561.527 97.3945 561.777 97.1719C562.027 96.9492 562.16 96.5957 562.176 96.1113H564.221ZM568.363 95.9883H567.25V99H565.193V90.4688H568.551C569.562 90.4688 570.354 90.6934 570.924 91.1426C571.494 91.5918 571.779 92.2266 571.779 93.0469C571.779 93.6406 571.658 94.1328 571.416 94.5234C571.178 94.9141 570.803 95.2305 570.291 95.4727L572.072 98.9121V99H569.869L568.363 95.9883ZM567.25 94.4004H568.551C568.941 94.4004 569.234 94.2988 569.43 94.0957C569.629 93.8887 569.729 93.6016 569.729 93.2344C569.729 92.8672 569.629 92.5801 569.43 92.373C569.23 92.1621 568.938 92.0566 568.551 92.0566H567.25V94.4004ZM578.852 99H572.898V97.7109L575.641 94.8281C576.316 94.0586 576.654 93.4473 576.654 92.9941C576.654 92.627 576.574 92.3477 576.414 92.1562C576.254 91.9648 576.021 91.8691 575.717 91.8691C575.416 91.8691 575.172 91.998 574.984 92.2559C574.797 92.5098 574.703 92.8281 574.703 93.2109H572.723C572.723 92.6875 572.854 92.2051 573.115 91.7637C573.377 91.3184 573.74 90.9707 574.205 90.7207C574.67 90.4707 575.189 90.3457 575.764 90.3457C576.686 90.3457 577.395 90.5586 577.891 90.9844C578.391 91.4102 578.641 92.0215 578.641 92.8184C578.641 93.1543 578.578 93.4824 578.453 93.8027C578.328 94.1191 578.133 94.4531 577.867 94.8047C577.605 95.1523 577.182 95.6191 576.596 96.2051L575.494 97.4766H578.852V99Z"
            fill="black"
          />
        {/if}
      </g>
      <g
        id="splash"
        on:touchstart={() => onHander("splash", "splash")}
        on:touchend={() => offHander("splash", "splash")}
        on:touchmove={moveHandler}
        on:touchcancel={() => offHander("splash", "splash")}
      >
        <circle
          id="splash_2"
          cx="340"
          cy="28"
          r="74.5"
          fill={status.splash ? "#6666DD" : "#D6C77A"}
          stroke="white"
        />
        {#if !swap}
          <path
            id="SPL"
            d="M334.129 86.7324C334.129 86.4316 334.021 86.1973 333.807 86.0293C333.596 85.8613 333.223 85.6875 332.688 85.5078C332.152 85.3281 331.715 85.1543 331.375 84.9863C330.27 84.4434 329.717 83.6973 329.717 82.748C329.717 82.2754 329.854 81.8594 330.127 81.5C330.404 81.1367 330.795 80.8555 331.299 80.6562C331.803 80.4531 332.369 80.3516 332.998 80.3516C333.611 80.3516 334.16 80.4609 334.645 80.6797C335.133 80.8984 335.512 81.2109 335.781 81.6172C336.051 82.0195 336.186 82.4805 336.186 83H334.135C334.135 82.6523 334.027 82.3828 333.812 82.1914C333.602 82 333.314 81.9043 332.951 81.9043C332.584 81.9043 332.293 81.9863 332.078 82.1504C331.867 82.3105 331.762 82.5156 331.762 82.7656C331.762 82.9844 331.879 83.1836 332.113 83.3633C332.348 83.5391 332.76 83.7227 333.35 83.9141C333.939 84.1016 334.424 84.3047 334.803 84.5234C335.725 85.0547 336.186 85.7871 336.186 86.7207C336.186 87.4668 335.904 88.0527 335.342 88.4785C334.779 88.9043 334.008 89.1172 333.027 89.1172C332.336 89.1172 331.709 88.9941 331.146 88.748C330.588 88.498 330.166 88.1582 329.881 87.7285C329.6 87.2949 329.459 86.7969 329.459 86.2344H331.521C331.521 86.6914 331.639 87.0293 331.873 87.248C332.111 87.4629 332.496 87.5703 333.027 87.5703C333.367 87.5703 333.635 87.498 333.83 87.3535C334.029 87.2051 334.129 86.998 334.129 86.7324ZM339.297 86.1055V89H337.24V80.4688H340.645C341.297 80.4688 341.873 80.5898 342.373 80.832C342.877 81.0703 343.266 81.4121 343.539 81.8574C343.816 82.2988 343.955 82.8008 343.955 83.3633C343.955 84.1953 343.656 84.8613 343.059 85.3613C342.465 85.8574 341.648 86.1055 340.609 86.1055H339.297ZM339.297 84.5176H340.645C341.043 84.5176 341.346 84.418 341.553 84.2188C341.764 84.0195 341.869 83.7383 341.869 83.375C341.869 82.9766 341.762 82.6582 341.547 82.4199C341.332 82.1816 341.039 82.0605 340.668 82.0566H339.297V84.5176ZM347.113 87.418H350.693V89H345.057V80.4688H347.113V87.418Z"
            fill="black"
          />
        {/if}
      </g>
      <g
        id="hat-closed"
        on:touchstart={() => onHander("hat_close", "hat_close")}
        on:touchend={() => offHander("hat_close", "hat_close")}
        on:touchmove={moveHandler}
        on:touchcancel={() => offHander("hat_close", "hat_close")}
      >
        <circle
          id="hat-closed_2"
          cx="831"
          cy="322"
          r="89.5"
          fill={status.hat_close ? "#6666DD" : "#ACA373"}
          stroke="white"
        />
        {#if !swap}
          <path
            id="HAT C"
            d="M821.725 399H819.68V395.438H816.65V399H814.594V390.469H816.65V393.855H819.68V390.469H821.725V399ZM827.982 397.406H825.164L824.672 399H822.475L825.604 390.469H827.537L830.689 399H828.48L827.982 397.406ZM825.656 395.818H827.49L826.57 392.859L825.656 395.818ZM837.311 392.057H834.75V399H832.693V392.057H830.18V390.469H837.311V392.057ZM847.723 396.111C847.695 396.705 847.535 397.23 847.242 397.688C846.949 398.141 846.537 398.492 846.006 398.742C845.479 398.992 844.875 399.117 844.195 399.117C843.074 399.117 842.191 398.752 841.547 398.021C840.902 397.291 840.58 396.26 840.58 394.928V394.506C840.58 393.67 840.725 392.939 841.014 392.314C841.307 391.686 841.727 391.201 842.273 390.861C842.82 390.518 843.453 390.346 844.172 390.346C845.207 390.346 846.039 390.619 846.668 391.166C847.297 391.709 847.654 392.459 847.74 393.416H845.689C845.674 392.896 845.543 392.523 845.297 392.297C845.051 392.07 844.676 391.957 844.172 391.957C843.66 391.957 843.285 392.148 843.047 392.531C842.809 392.914 842.684 393.525 842.672 394.365V394.969C842.672 395.879 842.785 396.529 843.012 396.92C843.242 397.311 843.637 397.506 844.195 397.506C844.668 397.506 845.029 397.395 845.279 397.172C845.529 396.949 845.662 396.596 845.678 396.111H847.723Z"
            fill="black"
          />
        {/if}
      </g>
      <g
        id="hat-opened"
        on:touchstart={() => onHander("hat_open", "hat_open")}
        on:touchend={() => offHander("hat_open", "hat_open")}
        on:touchmove={moveHandler}
        on:touchcancel={() => offHander("hat_open", "hat_open")}
      >
        <circle
          id="hat-opened_2"
          cx="799.5"
          cy="189.5"
          r="97"
          fill={status.hat_open ? "#6666DD" : "#ACA373"}
          stroke="white"
        />
        {#if !swap}
          <path
            id="HAT O"
            d="M790.52 269H788.475V265.438H785.445V269H783.389V260.469H785.445V263.855H788.475V260.469H790.52V269ZM796.777 267.406H793.959L793.467 269H791.27L794.398 260.469H796.332L799.484 269H797.275L796.777 267.406ZM794.451 265.818H796.285L795.365 262.859L794.451 265.818ZM806.105 262.057H803.545V269H801.488V262.057H798.975V260.469H806.105V262.057ZM816.84 264.91C816.84 265.742 816.686 266.479 816.377 267.119C816.068 267.76 815.629 268.254 815.059 268.602C814.492 268.945 813.846 269.117 813.119 269.117C812.393 269.117 811.748 268.951 811.186 268.619C810.623 268.283 810.184 267.805 809.867 267.184C809.555 266.562 809.391 265.85 809.375 265.045V264.564C809.375 263.729 809.527 262.992 809.832 262.355C810.141 261.715 810.58 261.221 811.15 260.873C811.725 260.525 812.377 260.352 813.107 260.352C813.83 260.352 814.475 260.523 815.041 260.867C815.607 261.211 816.047 261.701 816.359 262.338C816.676 262.971 816.836 263.697 816.84 264.518V264.91ZM814.748 264.553C814.748 263.705 814.605 263.062 814.32 262.625C814.039 262.184 813.635 261.963 813.107 261.963C812.076 261.963 811.531 262.736 811.473 264.283L811.467 264.91C811.467 265.746 811.605 266.389 811.883 266.838C812.16 267.287 812.572 267.512 813.119 267.512C813.639 267.512 814.039 267.291 814.32 266.85C814.602 266.408 814.744 265.773 814.748 264.945V264.553Z"
            fill="black"
          />
        {/if}
      </g>
      <g id="ride">
        <g id="ride_2">
          <circle
            id="ride_3"
            cx="782.5"
            cy="56.5"
            r="122"
            fill={status.ride ? "#6666DD" : "#DFD082"}
            stroke="white"
            on:touchstart={() => onHander("ride", "ride")}
            on:touchend={() => offHander("ride", "ride")}
            on:touchmove={moveHandler}
            on:touchcancel={() => offHander("ride", "ride")}
          />
          <circle
            id="ride-bell"
            cx="781.5"
            cy="54.5"
            r="32.5"
            fill={status.ride ? "#6666DD" : "#C2B469"}
            on:touchstart={() => onHander("ride_bell", "ride")}
            on:touchend={() => offHander("ride_bell", "ride")}
            on:touchmove={moveHandler}
            on:touchcancel={() => offHander("ride_bell", "ride")}
          />
        </g>
        {#if !swap}
          <path
            id="RIDE"
            d="M772.854 155.988H771.74V159H769.684V150.469H773.041C774.053 150.469 774.844 150.693 775.414 151.143C775.984 151.592 776.27 152.227 776.27 153.047C776.27 153.641 776.148 154.133 775.906 154.523C775.668 154.914 775.293 155.23 774.781 155.473L776.562 158.912V159H774.359L772.854 155.988ZM771.74 154.4H773.041C773.432 154.4 773.725 154.299 773.92 154.096C774.119 153.889 774.219 153.602 774.219 153.234C774.219 152.867 774.119 152.58 773.92 152.373C773.721 152.162 773.428 152.057 773.041 152.057H771.74V154.4ZM779.703 159H777.652V150.469H779.703V159ZM781.133 159V150.469H783.881C784.635 150.469 785.312 150.641 785.914 150.984C786.516 151.324 786.984 151.807 787.32 152.432C787.66 153.053 787.832 153.75 787.836 154.523V154.916C787.836 155.697 787.67 156.398 787.338 157.02C787.01 157.637 786.545 158.121 785.943 158.473C785.346 158.82 784.678 158.996 783.939 159H781.133ZM783.189 152.057V157.418H783.904C784.494 157.418 784.947 157.209 785.264 156.791C785.58 156.369 785.738 155.744 785.738 154.916V154.547C785.738 153.723 785.58 153.102 785.264 152.684C784.947 152.266 784.486 152.057 783.881 152.057H783.189ZM794.182 155.385H790.947V157.418H794.768V159H788.891V150.469H794.779V152.057H790.947V153.855H794.182V155.385Z"
            fill="black"
          />
        {/if}
      </g>
    </g>
  </svg>
</div>
<div
  class="swap"
  on:contextmenu={(e) => {
    e.preventDefault();
    swap = !swap;
  }}
>
  ↔
</div>
<style>
  .swap {
    color: #ff6644;
    position: fixed;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    font-size: 2.5em;
    font-weight:bolder;
	-webkit-text-stroke: 1px white;
  }

  .flip {
    transform: scaleX(-1);
  }

  .base{
      height: 100vh;
      width: 100vw;
  }
</style>
